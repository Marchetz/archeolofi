<html>
    <head>
        <title>Functions test page</title>
        <script src="libs/jquery-1.11.1.min.js"></script>
        <script src="libs/jquery.mobile-1.4.2/jquery.mobile-1.4.2.js"></script>
        <script language="JavaScript" type="text/JavaScript" src="functions.js"></script>
        <script>
            $(document).ready( function() {
                $("#login").click( function() {
                    data = read_form();
                    result = login(data[0], data[1]);
                    // document.write(result);
                });
            });

            $(document).ready( function() {
                $("#register").click( function() {
                    data = read_form();
                    result = register(data[0], data[1], data[2]);
                    // document.write(result);
                });
            });

            $(document).ready( function() {
                $("#comment").click( function() {
                    result = post_a_comment(15, "figata");
                    // document.write(result);
                });
            });

            $(document).ready( function() {
                var poi = 30;
                $("#get_contents").click( function() {
                    result = get_contents(poi);
                });
            });

            $(document).ready( function() {
                content_id = 15;
                var modified_comment = "no, no, no, sorry";
                $("#modify_comment").click( function() {
                    result = modify_comment(content_id, modified_comment);
                    // alert(result);
                });
            });

            $(document).ready( function() {
                content_id = 15;
                $("#remove_content").click( function() {
                    result = remove_content(content_id);
                    // alert(result);
                });
            });

            $(document).ready( function() {
                content_id = 1;
                do_like = true;
                $("#like").click( function() {
                    result = like(content_id, do_like);
                    // alert(result);
                });
            });

            $(function() {
                $('#upload_file').click(function() {
                    var poi = 14;
                    var form_data = new FormData($('#upload_file_form')[0]);
                    var file_decription = 'bada ganzo';
                    upload(poi, form_data, file_decription);
                });
            });

            $(document).ready( function() {
                var bbox = "43.77134173380578,11.248315572738647,43.773510955400546,11.262048482894897";
                var width = 1280;
                var height = 280;
                var x = 454;
                var y = 191;
                $("#get_wms_json").click( function() {
                    result = wms_proxy(bbox, width, height, x, y);
                    // alert(result);
                });
            });

            $(document).ready( function() {
                var id = 5;
                $("#opengeo").click( function() {
                    ask_opengeo("ritrovamento", id);
                });
            });
        </script>
    </head>

    <body>
        <form name= "user_form" >
            <div data-role="fieldcontain" class="ui-hide-label">
                <label for="username">Username:</label>
                <input type="text" name="username" id="name" value="" placeholder="Username"/>
            </div>

            <div data-role="fieldcontain" class="ui-hide-label">
                <label for="password">Password:</label>
                <input type="password" name="password" id="psw" value="" placeholder="Password"/>
            </div>

            <input type="button" id="login" data-icon="check" value="Login">    

            <br />

            <div data-role="fieldcontain" class="ui-hide-label">
                <label for="email">Se non sei ancora registrato inserisci anche la tua email:</label>
                <input type="text" name="email" id="email" value="" placeholder="email"/>
            </div>

            <input type="button" id="register" data-icon="edit" value="Register">

            <input type="button" id="comment" data-icon="edit" value="Comment">
        </form>

        <input type="button" id="get_contents" data-icon="edit" value="Get contents">
        <input type="button" id="modify_comment" data-icon="edit" value="Modify a comment">
        <input type="button" id="remove_content" data-icon="edit" value="Remove a content">
        <input type="button" id="like" data-icon="edit" value="Add a like to a content">

        <br />
        <form id="upload_file_form" method="post" enctype="multipart/form-data">
            <fieldset>
                <label for="file">Select a file</label>
                <input name="file" type="file">
            </fieldset>
            <fieldset>
                <button id="upload_file" type="button">Upload</button>
            </fieldset>
        </form>

        <br />
        <input type="button" id="get_wms_json" data-icon="edit" value="Get WMS json">
        <input type="button" id="which_last_id" data-icon="edit" value="Which was the last id?" onclick="alert(last_visited_id);">

        <br />
        <input type="button" id="opengeo" data-icon="edit" value="test opengeo">

    </body>
</html>
